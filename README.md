![Alt text](readme_src/preview.jpg)

# #TeamPixel case solution üí¨

Case description

# –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –ø—Ä–æ–µ–∫—Ç–∞

    1.1. [–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏](#–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
    
    1.2. [–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

    1.3. [–£—Ç–∏–ª–∏—Ç—ã](#—É—Ç–∏–ª–∏—Ç—ã)

2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

    2.1. [–ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞](#–±–∞–∑–æ–≤–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)

    2.2. [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
    kv
    2.3. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

    2.4. [–ó–∞–º–µ—Ç–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤](#–∑–∞–º–µ—Ç–∫–∏-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)

# –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –ø—Ä–æ–µ–∫—Ç–∞ üßë‚Äçüíª


![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54) ![JavaScript](https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E) ![Docker](https://img.shields.io/badge/docker-3670A0.svg?style=for-the-badge&logo=docker&logoColor=white)
![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white) ![Bootstrap](https://img.shields.io/badge/bootstrap-%238511FA.svg?style=for-the-badge&logo=bootstrap&logoColor=white) ![FastAPI](https://img.shields.io/badge/FastAPI-005571?style=for-the-badge&logo=fastapi)


#### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

- ‚ö°Ô∏è FastAPI ‚Äî back-end —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- ‚öôÔ∏è Starlette ‚Äî back-end —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ fastapi_cache TemplateResponseCoder, SQLAdmin)
- üëë SQLAdmin ‚Äî –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- üìú Swagger ‚Äî –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è RESTful API –ø—Ä–æ–µ–∫—Ç–∞
- üíæ fastapi_cache2 + aioredis ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Response/TemplateResponse –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ uvicorn
- üíø SQLalchemy ORM - ORM –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚¨ÜÔ∏è Alembic ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚õ©Ô∏è asyncio ‚Äî –ø—Ä–∏–Ω—Ü–∏–ø—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ–ª–µ–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–π —Å–∏—Å—Ç–µ–º—ã REST API
- üíõ JS ‚Äî frontend
- üíú Bootstrap ‚Äî font-end —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

#### –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- üå¥ GitFlow ‚Äî –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ç–≤–ª–µ–Ω–∏—è–º–∏ –≤ GIT
- ü™Ñ TDD (Test Driving Develop) ‚Äî –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- üîÅ DI/DIP (Dependency injector, Dependency inversion principle)
- ‚öñÔ∏è –ü—Ä–∏–Ω—Ü–∏–ø—ã SOLID –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

#### –£—Ç–∏–ª–∏—Ç—ã
- ü¶Ñ Uvicorn ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
- üí° Redis ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- üíª Tmux ‚Äî –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- üê≥ Docker ‚Äî –¥–ª—è –ø–æ–º–æ—â–∏ –≤ –¥–µ–ø–ª–æ–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CI/CD
- üìñ Poetry ‚Äî –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
- üíæ PostgreSQL –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ ‚Äî –°–£–ë–î –ø—Ä–æ–µ–∫—Ç–∞
- ‚úçÔ∏è Pre-commit ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –ª–∏–Ω—Ç–µ—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞

# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ ‚öôÔ∏è

### –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞ ```.env.example``` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ñ–∞–π–ª ```.env``` –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
2. –£–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–î–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—â–∏—Ö –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ —É–∂–µ –≥–æ—Ç–æ–≤—ã–π .env —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è Docker compose)

### –ó–∞–ø—É—Å–∫

–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker:

```bash
docker-compose up --build
```

–ß—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
docker-compose exec web python core/cmds.py loaddata
```

–ë–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Docker:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ redis
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ postgreSQL
3. –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ (–µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç), –∏/–∏–ª–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª .env —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –∏–∑ .env.example:
# –ï—Å–ª–∏ –≤—ã –ø–æ–¥–Ω–∏–º–∞–µ—Ç–µ –Ω–µ —á–µ—Ä–µ–∑ –¥–æ–∫–µ—Ä, —Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ –≤ POSTGRES_HOST —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ 127.0.0.1, –∞ –µ—Å–ª–∏ —á–µ—Ä–µ–∑ Docker, —Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ db (—á—Ç–æ –∏ —Å—Ç–æ–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```bash
DEBUG=0     # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ DEBUG —Ä–µ–∂–∏–º–∞
SECRET_KEY=test_secret_key  # –ö–ª—é—á –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JWT
CORS_ALLOWED_ORIGINS=http://localhost:3000  # CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏

# ===== POSTGRES =====
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST=db
POSTGRES_PORT=5432

# ===== TOKENS =====
ACCESS_TOKEN_LIFETIME=300
REFRESH_TOKEN_LIFETIME=86400
REFRESH_TOKEN_ROTATE_MIN_LIFETIME=3600
ALGORITHM=HS256

# ===== REDIS =====
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=password

# ==== TEST DATABASE ====
TEST_POSTGRES_DB=test
TEST_POSTGRES_USER=postgres
TEST_POSTGRES_PASSWORD=postgres
TEST_POSTGRES_HOST=db
TEST_POSTGRES_PORT=5432

```
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
python3 -m pip install -r requirements.txt
```
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
alembic upgrade head
```
6. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
```bash
python3 core/cmds.py loaddata
```

6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
uvicorn src.main:app --reload
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `http://127.0.0.1:8000/` –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å

### –ó–∞–º–µ—Ç–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ù–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —ç—Ç–∞–ø–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –º—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∑–∞–º–µ—Ç–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.md` (markdown v2).

–û–Ω–∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø–∞–ø–∫–µ `notes/`
